{% from "_form_helpers.html" import render_error, render_textarea %}
{% extends "layout/main.html" %}


{% block body %}


<div class="row">

	<!-- left column -->
	<div class="span6">
		<!-- Webcam: -->

    	<script type="text/javascript" src="{{ url_for('static', filename='js/webcam.js') }}"></script>
    	<!-- Configure a few settings -->
    	<script language="JavaScript">
        	webcam.set_api_url( 'http://nosdrahcir.com/reactions/test.php' );
        	webcam.set_quality( 90 ); // JPEG quality (1 - 100)
        	webcam.set_shutter_sound( false ); // play shutter click sound
    	</script>

		<script language="JavaScript">
			document.write( webcam.get_html(320, 240) );

		webcam.set_hook( 'onComplete', 'my_completion_handler' );
		
		function take_snapshot() {
			webcam.snap();
		}

		function my_delayed_completion_handler(msg) {
			/* document.getElementById('upload_results').innerHTML = 
			'<h1>Your reaction:</h1>' + 
			'<img src="' + msg + '" style="height: 240px; width: 320px;">';
					// reset camera for another shot
					*/
		}
		
		function my_completion_handler(msg) {
			// extract URL out of PHP output
			if (msg.match(/(http\:\/\/\S+)/)) {
				var image_url = RegExp.$1;
				setTimeout(my_delayed_completion_handler(image_url), 3000);
				//webcam.reset();
			}
			else alert("PHP Error: " + msg);
		}
		</script>
		this is where the webcam goes

	</div>

	<div class="span6">
		<div id="reactVid" style="width: 400px; height: 350px;"></div>
	</div>

	

</div>

{% endblock %}


{% block styles %}{% endblock %}
{% block scripts %}{% endblock %}